@page "/profile"
@inject HttpClient Http

@code {
    private Blazor.Models.UserDto user;
    private List<OnlineLibrary.Blazor.Models.BookDto> borrowedBooks;

    protected override async Task OnInitializedAsync()
    {
        var userId = 1; // Replace with actual user ID
        user = await Http.GetFromJsonAsync<OnlineLibrary.Blazor.Models.UserDto>($"api/Users/{userId}");
        borrowedBooks = await Http.GetFromJsonAsync<List<OnlineLibrary.Blazor.Models.BookDto>>($"api/Users/{userId}/borrowedBooks");
    }
}

<h3>User Profile</h3>
@if (user == null)
{
    <p>Loading...</p>
}
else
{
    <p>Username: @user.Username</p>
    <p>Email: @user.Email</p>

    <h4>Borrowed Books</h4>
    <ul>
        @foreach (var book in borrowedBooks)
        {
            <li>@book.Title by @book.Author</li>
        }
    </ul>
}
